#!/bin/sh

S=3500
INC=2
SCT=/usr/local/bin/sct

if [ ! -e "$SCT" ]; then
    echo "Please install sct!"
    exit 1;
fi

H=$(date +"%H" | sed -e 's/^0//')
M=$(date +"%M" | sed -e 's/^0//')
HM=$((${H}*60 + ${M}))

if [ $HM -gt 720 ]; then
    for i in $(jot $((1440 - $HM)));  do
        S=$((${S}+${INC}))
    done
else
    for i in $(jot $HM); do
        S=$((${S}+${INC}))
    done
fi

while true; do
    H=$(date +"%H" | sed -e 's/^0//')
    M=$(date +"%M" | sed -e 's/^0//')
    HM=$((${H}*60 + ${M}))

    if [ $HM -gt 720 ]; then
        S=$((${S}-${INC}))
    else
        S=$((${S}+${INC}))
    fi

    $SCT $S        

    sleep 60
done

