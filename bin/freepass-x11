#!/bin/sh

BINPATH="/home/qbit/bin"
NAME="Aaron Bieber"
FILES_DIR="$HOME/secure"
ROFI_SETTINGS="-dmenu -fuzzy"

if [ "$FREEPASS_MODE" = "MENU" ]; then
    exec rofi $ROFI_SETTINGS -p 'freepass> '
elif [ "$FREEPASS_MODE" = "TEXT" ]; then
    exec rofi $ROFI_SETTINGS -p "$FREEPASS_PROMPT: "
else
    FREEPASS_NAME="$NAME" \
    FREEPASS_MENU="${BINPATH}/freepass-x11" \
    FREEPASS_ASKTEXT="${BINPATH}/freepass-x11"
    FREEPASS_ASKPASS="ssh-askpass" \
    FREEPASS_FILE="$FILES_DIR/`ls $FILES_DIR | grep .fpass | rofi $ROFI_SETTINGS -p 'freepass file: '`" \ # Select .fpass files from $FILES_DIR
    ${BINPATH}/freepass | (while read -r line; do
        echo -n "$line" | xclip
        notify-send -u low "Copied to clipboard!"
    done)
fi
