#!/bin/ksh

DIR=$( pwd | awk -F \/ '{print $NF}' )

echo -n "Repo name: $DIR? (y/n) ";

read Y

if [ "$Y" != "y" ]; then
  echo -n "Enter repo name: "
  read DIR
fi

ssh akb.io "test -e /git/${DIR}.git || git init --bare /git/${DIR}.git"
curl -k -X POST --user qbit_:$PASS "https://api.bitbucket.org/1.0/repositories" -d "name=${DIR}"

if [ $( git remote | grep akb ) == "akb" ]; then
  echo "'akb' remote already exists in local branch.."
else 
  git remote add akb ssh://akb.io/git/${DIR}.git 
fi

git remote add bb ssh://git@bitbucket.org/qbit_/${DIR}.git 

git push -u akb master
git push -u bb master
